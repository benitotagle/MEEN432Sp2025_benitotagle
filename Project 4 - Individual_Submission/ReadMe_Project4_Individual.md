To run the simulation, make sure that the Simulink model titled "Project4\_Simulink" is located in the current MATLAB working directory or within the MATLAB path. After confirming the model is there, run the MATLAB script named "Project4\_main". This script initializes the necessary vehicle, battery, and environment parameters, generates the track geometry, runs the Simulink model, and animates the vehicle path based on simulation outputs.

For this week I implemented slope-based gradient resistance into the vehicle's longitudinal dynamics. In MATLAB, I defined an elevation profile along the track using the provided sigmoid function to simulate an uphill section on the first straight followed by a downhill section on the second straight. The slope of the track was computed as the derivative of elevation with respect to arc length, and the slope angle was calculated using the equation slope\_angle\_rad \= atan(dz/ds). This angle array was indexed to match each point on the track’s centerline (xpath, ypath) and passed into Simulink. I created a function called get\_slope\_angle that takes the vehicle’s current X and Y position, finds the closest point on the track, and returns the corresponding slope angle. This value was then used inside the longitudinal dynamics function to compute the gradient force using the equation F\_gradient \= mass \* g \* sin(slope\_angle). This force was added to the total resistive forces acting on the vehicle and subtracted from the tractive force to calculate the net force. The implementation behaves as expected: in the scope output, the gradient force is clearly resistive while the car ascends the first straight and becomes positive, as the car descends the second straight.

